<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    

    

    



    <meta charset="utf-8">
    <meta name="referrer" content="no-referrer">
    
    
    
    
    <title>Redis（01）笔记 | I AM SLOW WALKER, BUT I NEVER WALK BACK</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Redis">
    <meta name="description" content="#Redis笔记01  工作中也常常用到redis，对Redis的使用也是停留在一些操作上面，工作上也遇到要用redis的场景，例如：单点登录、缓存数据库（热点数据）、高并发某些特定业务的优化等；一直忙于项目，没有时间整理，前段时间买了一本掘金 老钱的Redis，觉得不错，顺便整理一下redis的知识，如有错误地方，请指正。  基础数据结构 string: 字符串 list: 列表 set: 集合">
<meta name="keywords" content="Redis">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis（01）笔记">
<meta property="og:url" content="http://lmwtuedu.cn/2018/09/20/2018-09-20-Redis笔记_01/index.html">
<meta property="og:site_name" content="I AM SLOW WALKER, BUT I NEVER WALK BACK">
<meta property="og:description" content="#Redis笔记01  工作中也常常用到redis，对Redis的使用也是停留在一些操作上面，工作上也遇到要用redis的场景，例如：单点登录、缓存数据库（热点数据）、高并发某些特定业务的优化等；一直忙于项目，没有时间整理，前段时间买了一本掘金 老钱的Redis，觉得不错，顺便整理一下redis的知识，如有错误地方，请指正。  基础数据结构 string: 字符串 list: 列表 set: 集合">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tNbRwgy1fvdj4jptm6j30ad03w0t4.jpg">
<meta property="og:image" content="https://ws4.sinaimg.cn/large/006tNbRwly1fv818grt5cj30au07m0t5.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/006tNbRwly1fv81g60s5tj30jl06bjs6.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/006tNbRwly1fvetx6nuoej30kn02gdfv.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/006tNbRwly1fvetycmurxj30bv05gglv.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tNbRwgy1fvft48n6qmj30d708ydg7.jpg">
<meta property="og:image" content="https://ws4.sinaimg.cn/large/006tNbRwly1fvfud0h68jj30ce03wgm2.jpg">
<meta property="og:updated_time" content="2019-09-17T08:20:05.256Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Redis（01）笔记">
<meta name="twitter:description" content="#Redis笔记01  工作中也常常用到redis，对Redis的使用也是停留在一些操作上面，工作上也遇到要用redis的场景，例如：单点登录、缓存数据库（热点数据）、高并发某些特定业务的优化等；一直忙于项目，没有时间整理，前段时间买了一本掘金 老钱的Redis，觉得不错，顺便整理一下redis的知识，如有错误地方，请指正。  基础数据结构 string: 字符串 list: 列表 set: 集合">
<meta name="twitter:image" content="https://ws3.sinaimg.cn/large/006tNbRwgy1fvdj4jptm6j30ad03w0t4.jpg">
    
        <link rel="alternate" type="application/atom+xml" title="I AM SLOW WALKER, BUT I NEVER WALK BACK" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/head.png">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/head_background.png)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/head.png">
        </a>
        <hgroup class="introduce">
          <h4 class="nickname">darker</h4>
          <a href="mailto:lmwtuedu@163.com" title="lmwtuedu@163.com" class="mail">lmwtuedu@163.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/share" target="_blank" >
                <i class="icon icon-lg icon-share-alt-square"></i>
                Share Link
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-id-badge"></i>
                About Me
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Redis（01）笔记</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h3 class="title">Redis（01）笔记</h3>
        <h5 class="subtitle">
            
                <time datetime="2018-09-19T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2018-09-20
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Redis/">Redis</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>Table Of Content</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#基础数据结构"><span class="post-toc-number">1.</span> <span class="post-toc-text">基础数据结构</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#String"><span class="post-toc-number">2.</span> <span class="post-toc-text">String</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#String的应用场景"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">String的应用场景</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#list"><span class="post-toc-number">3.</span> <span class="post-toc-text">list</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#list数据类型的应用场景"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">list数据类型的应用场景</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#hash"><span class="post-toc-number">4.</span> <span class="post-toc-text">hash</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#hash数据类型的应用场景"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">hash数据类型的应用场景</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#set"><span class="post-toc-number">5.</span> <span class="post-toc-text">set</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#set的应用场景"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">set的应用场景</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#zset"><span class="post-toc-number">6.</span> <span class="post-toc-text">zset</span></a></li></ol>
        </nav>
    </aside>


<article id="post-2018-09-20-Redis笔记_01"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Redis（01）笔记</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-09-20 00:00:00" datetime="2018-09-19T16:00:00.000Z"  itemprop="datePublished">2018-09-20</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Redis/">Redis</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>#Redis笔记01</p>
<blockquote>
<p>工作中也常常用到redis，对Redis的使用也是停留在一些操作上面，工作上也遇到要用redis的场景，例如：单点登录、缓存数据库（热点数据）、高并发某些特定业务的优化等；一直忙于项目，没有时间整理，前段时间买了一本掘金 老钱的Redis，觉得不错，顺便整理一下redis的知识，如有错误地方，请指正。</p>
</blockquote>
<h3 id="基础数据结构"><a href="#基础数据结构" class="headerlink" title="基础数据结构"></a>基础数据结构</h3><ul>
<li>string: 字符串</li>
<li>list: 列表</li>
<li>set: 集合</li>
<li>hash: 哈希</li>
<li>zset: 有序集合</li>
</ul>
<p>封装了基本的线程池以及工具类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.darker.redis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPool;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPoolConfig;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> lj</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018/9/17 16:53</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@email</span> lmwtuedu@163.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisPool</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Logger log = LoggerFactory.getLogger(RedisPool.class);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 线程池的配置，继承于apache common pool2</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> JedisPoolConfig jedisPoolConfig;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * redis的IP地址</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String ip;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * redis的端口号</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> port;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * redis的密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 	可用连接实例的最大数目，默认值为8；</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> maxTotal;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> maxIdle;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 等待可用连接的最大时间，单位毫秒，</span></span><br><span class="line"><span class="comment">     * 默认值为-1，表示永不超时。如果超过等待时间，</span></span><br><span class="line"><span class="comment">     * 则直接抛出JedisConnectionException；</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> maxWaitMillis;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * redis的线程池</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> JedisPool jedisPool;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化Redis连接池</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialPool</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            jedisPool = <span class="keyword">new</span> JedisPool(jedisPoolConfig, ip, port, <span class="number">4000</span>, password);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">"First create JedisPool error : "</span> + e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取Instance</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Jedis <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> jedisPool.getResource();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 回收redis</span></span><br><span class="line"><span class="comment">     * 注意：returnResource</span></span><br><span class="line"><span class="comment">     *      returnBrokenResource</span></span><br><span class="line"><span class="comment">     * 两种方法封装close</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> jedis</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Jedis jedis)</span></span>&#123;</span><br><span class="line">        jedis.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>封装了一个Manger的类工具，专门管理redis的操作。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.darker.redis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> lj</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018/9/18 10:50</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@email</span> lmwtuedu@163.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisManager</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> RedisPool redisPool;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RedisManager</span><span class="params">(RedisPool redisPool)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.redisPool = redisPool;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Jedis <span class="title">getRedis</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> redisPool.getInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Jedis jedis)</span></span>&#123;</span><br><span class="line">       redisPool.close(jedis);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> 	 .....   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以下基于基本的类型，给予操作，以及一些使用场景。</p>
<h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><p> 字符串的结构使用非常广泛，一个常见的用途就是<strong>缓存用户信息</strong>； 怎么缓存用户信息呢？ 例如用户信息是一个对象或者是一个JSON，推荐采用json，键值对方式容易扩张，然后序列化成字符串形式，然后塞进Redis缓存。 同样，取用户信息经过一次反序列化的过程。</p>
<p>Redis 的字符串是动态字符串，是可以修改的字符串，内部结构实现上类似于 Java 的 ArrayList，<font color="red">采用预分配冗余空间的方式</font>来减少内存的频繁分配。</p>
<blockquote>
<p>当字符串长度小于 1M 时，扩容都是加倍现有的空间，如果超过 1M，扩容时一次只会多扩 1M 的空间。需要注意的是字符串最大长度为 512M。</p>
</blockquote>
<p>这句话：”扩容都是加倍现有空间”。</p>
<p>字符串是由多个字节组成，每个字节又是由8个bit组成，如此便可以将一个字符串看成很多bit的组合，这便是 <em>bitmap(位图)</em> 数据结构。</p>
<p>Jedis提供关于String的操作Java的API有这些：set</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fvdj4jptm6j30ad03w0t4.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 存储数据到缓存中，若key已存在则覆盖 value的长度不能超过1073741824 bytes (1 GB)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">String <span class="title">set</span><span class="params">(String key, String value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 存储数据到缓存中，并制定过期时间和当Key存在时是否覆盖。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> nxxx </span></span><br><span class="line"><span class="comment"> *            nxxx的值只能取NX或者XX，如果取NX，则只有当key不存在是才进行set，如果取XX，则只有当key已经存在时才进行set</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> expx expx的值只能取EX或者PX，代表数据过期时间的单位，EX代表秒，PX代表毫秒。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> time 过期时间，单位是expx所代表的单位。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">String <span class="title">set</span><span class="params">(String key, String value, String nxxx, String expx, <span class="keyword">long</span> time)</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="String的应用场景"><a href="#String的应用场景" class="headerlink" title="String的应用场景"></a>String的应用场景</h4><p>1) 存储SQL的某一个字段</p>
<p>把Key值设计为：  <code>表名：主键名：主键值：字段名</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set user:id:1:email:123456@163.com</span><br></pre></td></tr></table></figure>

<p>2)存储对象</p>
<p>String类型支持任何格式的字符串，应用最多的就是存储JSON或其他对象格式的字符串，应用最多的就是存储JSON或其他对象格式化的字符串。(这种场景下推荐使用hash数据类型)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set user:id:1 &apos;[&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;zj&quot;,&quot;email&quot;:&quot;156577812@qq.com&quot;&#125;,&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;zj&quot;,&quot;email&quot;:&quot;156577812@qq.com&quot;&#125;]&apos;</span><br></pre></td></tr></table></figure>

<p>3) 生成自增id</p>
<p>当redis的string类型的值为整数形式时，redis可以把它当做是整数一样进行自增(incr)、自减(decr)操作。由于redis所有操作都是原子性的，所以<code>不必担心客户端连接时可能出现的事务</code>问题。</p>
<h3 id="list"><a href="#list" class="headerlink" title="list"></a>list</h3><p>Redis的列相当于Java语言的LinkedList，注意它是链表而不是数组。这意味着list的插入和删除操作非常快，时间复杂度为O(1), 但是索引很慢，时间复杂度为O(n).</p>
<p>如果再深入一点，你会发现Redis底层存储的还不是一个简单的linkedlist，而是称之为快速链表quicklist 的一个结构。</p>
<p>首先在列表元素较少的情况下会使用一块连续的内存存储，这个结构是 <code>ziplist</code> , 也是压缩列表。 它将所有的元素紧挨着一起存储，分配的是一块连续的内存。 当数据量比较多的时候才会改成 quicklist。 因为普通的链表需要的附加指针空间太大，会比较浪费时间，而且会加重内存的碎片化。 比如这个列表存的只是<code>int</code>类型的数据， 结构上还需要两个额外的指针 <code>prev</code> 和 <code>next</code>. 所以Redis将链表和 <code>ziplist</code>结合起来组成了 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 右进</span></span><br><span class="line"><span class="function">Long <span class="title">rpush</span><span class="params">(String key, String... string)</span></span>;</span><br><span class="line"><span class="comment">// 左进</span></span><br><span class="line"><span class="function">Long <span class="title">lpush</span><span class="params">(String key, String... string)</span></span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 左出</span></span><br><span class="line"><span class="function">String <span class="title">lpop</span><span class="params">(String key)</span></span>;</span><br><span class="line"><span class="comment">// 右出</span></span><br><span class="line"><span class="function">String <span class="title">rpop</span><span class="params">(String key)</span></span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;String&gt; <span class="title">lrange</span><span class="params">(String key, <span class="keyword">long</span> start, <span class="keyword">long</span> end)</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="list数据类型的应用场景"><a href="#list数据类型的应用场景" class="headerlink" title="list数据类型的应用场景"></a>list数据类型的应用场景</h4><p>1) 消息队列</p>
<p>redis的list数据类型对于大部分使用者来说，是实现队列服务最为经济，最为简单方式。</p>
<p>2) “最新内容”</p>
<p>因为list结构的数据查询两端附近的数据性能非常好，所以适合一些需要获取最新数据的场景，比如新闻类应用的 “最新新闻”。</p>
<p>优化建议：<br>list是链表结构，所以如果在头部和尾部插入数据，性能非常高，不受链表长度影响；但是如果在链表中插入数据，性能就会越来越差。</p>
<h3 id="hash"><a href="#hash" class="headerlink" title="hash"></a>hash</h3><p>Redis的字典相当于Java语言里面的HashMap，它是无序字典。 内部实现结构上同Java的HashMap也一致。 同样的数组 + 链表二位结构。 第一维 hash的数组位置碰撞时，就会将碰撞的元素使用链表串接起来。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://ws4.sinaimg.cn/large/006tNbRwly1fv818grt5cj30au07m0t5.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>不同的是，Redis的字典的值只能是字符串，另外它们的rehash的方式不一样，因为Java的HashMap在字典很大的时候，rehash是个耗时的操作，需要一次性全部rehash。 Redis为了提高性能，不能堵塞服务，所以采取了渐进方式rehash策略。</p>
<p> <img src="https://ws1.sinaimg.cn/large/006tNbRwly1fv81g60s5tj30jl06bjs6.jpg" alt></p>
<p> 渐进式 rehash 会在 rehash 的同时，保留新旧两个 hash 结构，查询时会同时查询两个 hash 结构，然后在后续的定时任务中以及 hash 操作指令中，循序渐进地将旧 hash 的内容一点点迁移到新的 hash 结构中。当搬迁完成了，就会使用新的hash结构取而代之。</p>
<p> hash 结构也可以用来存储用户信息，不同于字符串一次性需要<strong>全部序列化整个对象</strong>，hash 可以对用户结构中的每个字段单独存储。这样当我们需要获取用户信息时可以进行部分获取。而以整个字符串的形式去保存用户信息的话就只能一次性全部读取，这样就会比较浪费网络流量。</p>
<p> hash 也有缺点，hash 结构的存储消耗要高于单个字符串，到底该使用 hash 还是字符串，需要根据实际情况再三权衡。</p>
<h4 id="hash数据类型的应用场景"><a href="#hash数据类型的应用场景" class="headerlink" title="hash数据类型的应用场景"></a>hash数据类型的应用场景</h4><p>hash 类型很像一个关系型数据库的数据表，hash 的 Key 是一个唯一值，Value 部分是一个 hashmap 的结构。</p>
<p>假设一张表结构如下：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://ws1.sinaimg.cn/large/006tNbRwly1fvetx6nuoej30kn02gdfv.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>如果要用redis的hash结构存储，数据模型如下：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://ws1.sinaimg.cn/large/006tNbRwly1fvetycmurxj30bv05gglv.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>hash数据类型在存储上述类型的数据时具有比string类型更加灵活、更快的优势。使用string类型存储，必然需要转换和解析json格式的字符串，即便不需要转换，在内存开销方面还是hash占优势。</p>
<h3 id="set"><a href="#set" class="headerlink" title="set"></a>set</h3><p>Redis的集合相当于Java语言里面的HashSet，它内部的键值对是无序的的唯一的，它的内部实现相当于一个特殊的字典，字典中所有的value都是NULL。</p>
<p>set 结构可以用来存储活动中奖的用户 ID，因为有去重功能，可以保证同一个用户不会中奖两次。</p>
<p>set数据类型是一个集合(没有排序，不重复)，可以对set类型的数据进行添加、删除、判断是否存在等操作(时间复杂度O(1))</p>
<p>set集合不允许数据重复，如果添加的数据在set中已经存在，将只保留一份。</p>
<p>set类型提供了多个set之间的聚合运算，如求交集、并集、补集；这些操作在redis的内部完成，效率很高。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fvft48n6qmj30d708ydg7.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<p>set 类型的特点是——不重复且无序的一组数据，并且具有丰富的计算功能，在一些特定的场景中可以高效的解决一般关系型数据库不方便做的工作。</p>
<h4 id="set的应用场景"><a href="#set的应用场景" class="headerlink" title="set的应用场景"></a>set的应用场景</h4><p>“共同好友列表”</p>
<p>　社交类应用中，获取两个人或多个人的共同好友，两个人或多个人共同关注的微博这样类似的功能，用 MySQL 的话操作很复杂，可以把每个人的好友 id 存到集合中，获取共同好友的操作就可以简单到一个取交集的命令就搞定。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// 这里为了方便阅读，把 id 替换成姓名</span><br><span class="line">sadd user:wade james melo paul kobe</span><br><span class="line">sadd user:james wade melo paul kobe</span><br><span class="line">sadd user:paul wade james melo kobe</span><br><span class="line">sadd user:melo wade james paul kobe</span><br><span class="line"></span><br><span class="line">// 获取 wade 和 james 的共同好友</span><br><span class="line">sinter user:wade user:james</span><br><span class="line">/* 输出：</span><br><span class="line"> *      1) &quot;kobe&quot;</span><br><span class="line"> *      2) &quot;paul&quot;</span><br><span class="line"> *      3) &quot;melo&quot;</span><br><span class="line"> */</span><br><span class="line"> </span><br><span class="line"> // 获取香蕉四兄弟的共同好友</span><br><span class="line"> sinter user:wade user:james user:paul user:melo</span><br><span class="line"> /* 输出：</span><br><span class="line"> *      1) &quot;kobe&quot;</span><br><span class="line"> */</span><br><span class="line"> </span><br><span class="line"> /*</span><br><span class="line">     类似的需求还有很多 , 必须把每个标签下的文章 id 存到集合中，可以很容易的求出几个不同标签下的共同文章；</span><br><span class="line"> 把每个人的爱好存到集合中，可以很容易的求出几个人的共同爱好。 </span><br><span class="line"> */</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Long <span class="title">sadd</span><span class="params">(String key, String... member)</span></span>;</span><br><span class="line"><span class="function">Long <span class="title">sadd</span><span class="params">(<span class="keyword">byte</span>[] key, <span class="keyword">byte</span>[]... member)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="zset"><a href="#zset" class="headerlink" title="zset"></a>zset</h3><p>zset 可能是 Redis 提供的最为特色的数据结构，它也是在面试中面试官最爱问的数据结构。它类似于 Java 的 SortedSet 和 HashMap 的结合体，一方面它是一个 set，保证了内部 value 的唯一性，另一方面它可以给每个 value 赋予一个 score，代表这个 value 的排序权重。它的内部实现用的是一种叫做「跳跃列表」的数据结构。</p>
<p>zset 可以用来存粉丝列表，value 值是粉丝的用户 ID，score 是关注时间。我们可以对粉丝列表按关注时间进行排序。</p>
<p>zset 还可以用来存储学生的成绩，value 值是学生的 ID，score 是他的考试成绩。我们可以对成绩按分数进行排序就可以得到他的名次。</p>
<p>java: zadd(…) 参数列表如下：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://ws4.sinaimg.cn/large/006tNbRwly1fvfud0h68jj30ce03wgm2.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Long <span class="title">zadd</span><span class="params">(String key, <span class="keyword">double</span> score, String member)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Long <span class="title">zadd</span><span class="params">(String key, <span class="keyword">double</span> score, String member, ZAddParams params)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Long <span class="title">zadd</span><span class="params">(String key, Map&lt;String, Double&gt; scoreMembers)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Long <span class="title">zadd</span><span class="params">(String key, Map&lt;String, Double&gt; scoreMembers, ZAddParams params)</span></span>;</span><br></pre></td></tr></table></figure>


        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2019-09-17T08:20:05.256Z" itemprop="dateUpdated">2019-09-17 16:20:05</time>
</span><br>


        
        欢迎访问 http://lmwtuedu.cn，希望此文章对您有帮助!
        
    </div>
    
    <footer>
        <a href="http://lmwtuedu.cn">
            <img src="/img/head.png" alt="darker">
            darker
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Redis/">Redis</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://lmwtuedu.cn/2018/09/20/2018-09-20-Redis笔记_01/&title=《Redis（01）笔记》 — I AM SLOW WALKER, BUT I NEVER WALK BACK&pic=http://lmwtuedu.cn/img/head.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://lmwtuedu.cn/2018/09/20/2018-09-20-Redis笔记_01/&title=《Redis（01）笔记》 — I AM SLOW WALKER, BUT I NEVER WALK BACK&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://lmwtuedu.cn/2018/09/20/2018-09-20-Redis笔记_01/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Redis（01）笔记》 — I AM SLOW WALKER, BUT I NEVER WALK BACK&url=http://lmwtuedu.cn/2018/09/20/2018-09-20-Redis笔记_01/&via=http://lmwtuedu.cn" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://lmwtuedu.cn/2018/09/20/2018-09-20-Redis笔记_01/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/10/17/2018-10-17-燕十八MYSQL练习/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">燕十八的MYSQL练习</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/09/05/2018-09-05-闲说RPC_01/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">闲说RPC_01</h4>
      </a>
    </div>
  
</nav>



    




















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        请喝维他奶~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.PNG" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.PNG" data-alipay="/img/alipay.PNG">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="bottom">
        <p><span>darker &copy; 2019</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://lmwtuedu.cn/2018/09/20/2018-09-20-Redis笔记_01/&title=《Redis（01）笔记》 — I AM SLOW WALKER, BUT I NEVER WALK BACK&pic=http://lmwtuedu.cn/img/head.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://lmwtuedu.cn/2018/09/20/2018-09-20-Redis笔记_01/&title=《Redis（01）笔记》 — I AM SLOW WALKER, BUT I NEVER WALK BACK&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://lmwtuedu.cn/2018/09/20/2018-09-20-Redis笔记_01/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Redis（01）笔记》 — I AM SLOW WALKER, BUT I NEVER WALK BACK&url=http://lmwtuedu.cn/2018/09/20/2018-09-20-Redis笔记_01/&via=http://lmwtuedu.cn" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://lmwtuedu.cn/2018/09/20/2018-09-20-Redis笔记_01/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACI0lEQVR42u3aQY6EMAwFUe5/6R6pV7Mhqm+H0eBUVqgFJI+F23F8XXh8vuP39d0gT6X3bBsyZMh4LYMsaz0Bf0Nn3vUnkyFDxgkMHmTJnSQqrnl8bTJkyJBRW9w6XK5JMmTIkNFnpAviiaYMGTJkrBnpFnTXs/yTbduLy5Ah44WM2sHA31w/fr4hQ4aMf8/4hKM/PQmX8apkyJAxmnH3GC+xpZtPchhQ/BAyZMg4gPFEKb/WfkFC+W3AlSFDxlAGfykvuvGEL70zbg6TIUPGIMYTjRQ8c+vkeDJkyJjN6BwNkqXwVol03mIslyFDxssZ/YDL7ye/FM83ZMiQMZSRlu/5omultPg9MmTIGM3ggXU9JQenzxarhjJkyBjEQO1WIGm78ODpYNDSIUOGjAMYPHVLAcVlpeU8GTJkHMDoH0OSLWi/3BanhjJkyBjKSDeutSPMWhsHOt+QIUPGOMaurWYtBD/dliFDhoxJjDRdq32I2tFm8GcgQ4aMoQzePJEmbZ2WsjSKypAh4xxGZ0oelHlaGcwlQ4aM0Yx+YpduTfkb+GGDDBkyZjNqJfg0laxta4N5ZciQMZrBB99edhosyD9DrfwnQ4aMtzM6hbPOqG1Tb1ciQ4aMAxjpNOlBQqtwljZbyJAh42AGbxTbFUyDzydDhgwZmxos+FaWHFrIkCHjNEa6uH5ZjSeIKGTLkCFjNKO1dQxbJfpdIa3CnwwZMt7H+AH6QaOJeosf7wAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>








<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = 'Cherry Up';
            clearTimeout(titleTime);
        } else {
            document.title = 'Champion';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
